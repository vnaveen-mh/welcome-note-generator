package templates

import "fmt"

func buildFormAction(formUrl, csrfToken string) string {
	return fmt.Sprintf("@post('%s', { contentType: 'form', headers: { 'X-CSRF-Token': '%s' } })", formUrl, csrfToken)
}

templ Index(csrfToken string) {
	@Layout("Welcome Note Generator - Genkit AI Demo") {
		<div class="min-h-screen bg-[var(--bg)]">
			<!-- Hero Header -->
			<section class="hero-animated border-b border-[var(--border)]">
				<div class="hero-grid">
					<div class="hero-grid-lines"></div>
					<div class="hero-beam"></div>
				</div>
				<div class="relative max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-16 md:py-24">
					<div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-[var(--accent-soft)] text-[var(--accent-strong)] text-sm font-semibold border border-[var(--border)] shadow-sm">
						<i class="fa-solid fa-sparkles"></i>
						<span>Powered by Genkit & LLMs</span>
					</div>
					<div class="mt-6 grid lg:grid-cols-5 gap-10 items-center">
						<div class="lg:col-span-3 space-y-6">
							<h1 class="text-4xl md:text-5xl lg:text-6xl font-bold leading-tight text-[var(--bg-contrast)]">
								Welcome Note Generator
							</h1>
							<p class="text-lg text-[var(--muted)] max-w-2xl">
								Generate AI-powered welcome messages using Genkit and LLMs. From simple prompts to smart moderation‚Äîall streaming in real-time via SSE.
							</p>
							<div class="flex flex-wrap gap-4">
								<button
									type="button"
									class="inline-flex items-center gap-2 px-6 py-3 rounded-xl bg-[var(--accent)] text-white font-semibold shadow-md hover:bg-[var(--accent-strong)] transition-all"
									data-on:click="document.getElementById('demo').scrollIntoView({behavior:'smooth'});"
								>
									Try Live Demo
									<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5-5 5M6 12h12"></path></svg>
								</button>
								<a href="https://github.com/vnaveen-mh/welcome-note-generator" target="_blank" rel="noreferrer noopener" class="inline-flex items-center gap-2 px-6 py-3 rounded-xl border border-[var(--border)] bg-white text-[var(--bg-contrast)] font-semibold shadow-sm hover:border-[var(--accent)] transition-all">
									<i class="fa-brands fa-github"></i>
									View Source
								</a>
							</div>
							<div class="flex flex-wrap gap-3 text-sm text-[var(--muted)]">
								<span class="px-3 py-1 rounded-full bg-white border border-[var(--border)] shadow-sm">üî• Genkit Flows</span>
								<span class="px-3 py-1 rounded-full bg-white border border-[var(--border)] shadow-sm">‚ú® Gemini AI</span>
								<span class="px-3 py-1 rounded-full bg-white border border-[var(--border)] shadow-sm">‚ö° Real-time SSE</span>
								<span class="px-3 py-1 rounded-full bg-white border border-[var(--border)] shadow-sm">üõ°Ô∏è AI Moderation</span>
							</div>
						</div>
						<div class="lg:col-span-2">
							<div class="card rounded-2xl p-6 backdrop-blur">
								<div class="flex items-center justify-between mb-4">
									<div class="text-sm font-semibold text-[var(--muted)]">Live signal state</div>
									<span class="px-3 py-1 rounded-full bg-[var(--accent-soft)] text-[var(--accent-strong)] text-xs font-semibold">Datastar</span>
								</div>
								<div class="space-y-3 text-sm">
									<div class="flex items-center justify-between border border-[var(--border)] rounded-xl px-3 py-2 bg-white">
										<span class="text-[var(--muted)]">activeTab</span>
										<span class="font-semibold text-[var(--bg-contrast)]" data-text="$activeTab"></span>
									</div>
									<div class="flex items-center justify-between border border-[var(--border)] rounded-xl px-3 py-2 bg-white">
										<span class="text-[var(--muted)]">loading</span>
										<span class="font-semibold text-[var(--bg-contrast)]" data-text="$loading"></span>
									</div>
									<div class="flex items-center justify-between border border-[var(--border)] rounded-xl px-3 py-2 bg-white">
										<span class="text-[var(--muted)]">has result</span>
										<span class="font-semibold text-[var(--bg-contrast)]" data-text="!!$result"></span>
									</div>
								</div>
								<div class="mt-5 p-4 rounded-xl bg-[var(--accent-soft)] border border-[var(--border)] text-[var(--accent-strong)] text-sm">
									<i class="fa-solid fa-wave-square mr-2"></i>
									Streaming over SSE ‚Äî patches arrive as soon as flows finish.
								</div>
							</div>
						</div>
					</div>
				</div>
			</section>
			<!-- Live Preview Section -->
			<div class="py-20 bg-white">
				<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
					<div class="text-center mb-16">
						<h2 class="text-4xl font-bold text-gray-900 mb-4">See It In Action</h2>
						<p class="text-xl text-gray-600 max-w-3xl mx-auto">
							Watch how each flow version handles different use cases, from simple text generation to advanced AI-moderated content with natural language understanding.
						</p>
					</div>
					<div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12">
						<!-- Simple Flow Demo -->
						<div class="group relative bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-8 border-2 border-blue-100 hover:border-blue-300 transition-all duration-300 hover:shadow-xl">
							<div class="flex items-start justify-between mb-4">
								<div>
									<span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mb-3">V1 & V2</span>
									<h3 class="text-2xl font-bold text-gray-900 mb-2">Simple & Structured Flows</h3>
									<p class="text-gray-600">Basic string input evolving to rich structured parameters with language, tone, and length control.</p>
								</div>
							</div>
							<div class="mt-6 bg-white rounded-xl shadow-lg overflow-hidden border border-gray-200 aspect-video flex items-center justify-center">
								<!-- Placeholder for GIF/Video -->
								<div class="text-center p-8">
									<svg class="w-16 h-16 mx-auto text-blue-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
										<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"></path>
									</svg>
									<p class="text-sm text-gray-500 font-medium">Simple to Structured Input</p>
									<p class="text-xs text-gray-400 mt-1">AI-powered text generation</p>
								</div>
								<!--
								Replace the above div with your GIF:
								<img src="/static/demos/v1-v2-demo.gif" alt="V1 and V2 Flow Demo" class="w-full h-full object-cover" />
								-->
							</div>
							<div class="mt-4 flex items-center text-sm text-gray-500">
								<svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
									<path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
								</svg>
								Response time: ~1-2s
							</div>
						</div>
						<!-- Metadata Flow Demo -->
						<div class="group relative bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl p-8 border-2 border-purple-100 hover:border-purple-300 transition-all duration-300 hover:shadow-xl">
							<div class="flex items-start justify-between mb-4">
								<div>
									<span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800 mb-3">V3</span>
									<h3 class="text-2xl font-bold text-gray-900 mb-2">Structured Output Flow</h3>
									<p class="text-gray-600">Returns rich metadata alongside generated content for complete transparency and debugging.</p>
								</div>
							</div>
							<div class="mt-6 bg-white rounded-xl shadow-lg overflow-hidden border border-gray-200 aspect-video flex items-center justify-center">
								<!-- Placeholder for GIF/Video -->
								<div class="text-center p-8">
									<svg class="w-16 h-16 mx-auto text-purple-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
										<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
									</svg>
									<p class="text-sm text-gray-500 font-medium">Metadata Output</p>
									<p class="text-xs text-gray-400 mt-1">Rich structured responses</p>
								</div>
								<!--
								Replace with:
								<img src="/static/demos/v3-demo.gif" alt="V3 Metadata Flow Demo" class="w-full h-full object-cover" />
								-->
							</div>
							<div class="mt-4 flex items-center text-sm text-gray-500">
								<svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
									<path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
									<path fill-rule="evenodd" d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
								</svg>
								Includes: Occasion, Language, Length, Tone
							</div>
						</div>
					</div>
					<div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
						<!-- Safe Flow Demo -->
						<div class="group relative bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl p-8 border-2 border-green-100 hover:border-green-300 transition-all duration-300 hover:shadow-xl">
							<div class="flex items-start justify-between mb-4">
								<div>
									<span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 mb-3">Safe Flow</span>
									<h3 class="text-2xl font-bold text-gray-900 mb-2">AI-Moderated Content</h3>
									<p class="text-gray-600">Multi-step flow with content safety checking, toxicity filtering, and automatic sanitization.</p>
								</div>
							</div>
							<div class="mt-6 bg-white rounded-xl shadow-lg overflow-hidden border border-gray-200 aspect-video flex items-center justify-center">
								<!-- Placeholder for GIF/Video -->
								<div class="text-center p-8">
									<svg class="w-16 h-16 mx-auto text-green-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
										<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
									</svg>
									<p class="text-sm text-gray-500 font-medium">Content Moderation</p>
									<p class="text-xs text-gray-400 mt-1">AI-powered safety filtering</p>
								</div>
								<!--
								Replace with:
								<img src="/static/demos/safe-demo.gif" alt="Safe Flow Demo" class="w-full h-full object-cover" />
								-->
							</div>
							<div class="mt-4 flex items-center text-sm text-gray-500">
								<svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
									<path fill-rule="evenodd" d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
								</svg>
								Automatic toxicity detection & sanitization
							</div>
						</div>
						<!-- Smart Flow Demo -->
						<div class="group relative bg-gradient-to-br from-orange-50 to-amber-50 rounded-2xl p-8 border-2 border-orange-100 hover:border-orange-300 transition-all duration-300 hover:shadow-xl">
							<div class="flex items-start justify-between mb-4">
								<div>
									<span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800 mb-3">Smart Flow</span>
									<h3 class="text-2xl font-bold text-gray-900 mb-2">Natural Language Input</h3>
									<p class="text-gray-600">AI interprets free-form descriptions, extracts parameters, generates content, and moderates‚Äîall in one flow.</p>
								</div>
							</div>
							<div class="mt-6 bg-white rounded-xl shadow-lg overflow-hidden border border-gray-200 aspect-video flex items-center justify-center">
								<!-- Placeholder for GIF/Video -->
								<div class="text-center p-8">
									<svg class="w-16 h-16 mx-auto text-orange-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
										<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
									</svg>
									<p class="text-sm text-gray-500 font-medium">Smart Interpretation</p>
									<p class="text-xs text-gray-400 mt-1">Natural language understanding</p>
								</div>
								<!--
								Replace with:
								<img src="/static/demos/smart-demo.gif" alt="Smart Flow Demo" class="w-full h-full object-cover" />
								-->
							</div>
							<div class="mt-4 flex items-center text-sm text-gray-500">
								<svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
									<path d="M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z"></path>
								</svg>
								3-step pipeline: Interpret ‚Üí Generate ‚Üí Moderate
							</div>
						</div>
					</div>
				</div>
			</div>
			<!-- Main Content -->
			<div
				id="demo"
				class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12"
				data-signals="{loading: false, activeTab: 'v1', v1Tab: {result: '', error: '', occasion: '', copied: false}, v2Tab: {result: '', error: '', occasion: '', copied: false}, v3Tab: {result: '', error: '', occasion: '', copied: false}, safeTab: {result: '', error: '', occasion: '', copied: false}, smartTab: {result: '', error: '', description: '', copied: false}}"
				data-scope="app"
			>
				<!-- Section Header -->
				<div class="text-center mb-12">
					<h2 class="text-3xl font-bold text-gray-900 mb-4">Try Different Flow Versions</h2>
					<p class="text-lg text-gray-600 max-w-3xl mx-auto">
						Explore our progressive implementations from simple string I/O to advanced AI-moderated smart flows.
						Each version builds on the previous, showcasing production-ready patterns.
					</p>
				</div>
				<!-- Tab Navigation -->
				<div class="mb-8">
					<nav class="flex flex-wrap gap-3 justify-center">
						@TabButton("v1", "V1: Simple", "Basic string input/output")
						@TabButton("v2", "V2: Structured", "Rich input parameters")
						@TabButton("v3", "V3: Metadata", "Structured output with info")
						@TabButton("safe", "Safe Flow", "With content moderation")
						@TabButton("smart", "Smart Flow", "Natural language input")
					</nav>
				</div>
				<!-- Tab Content -->
				<div class="bg-white rounded-2xl shadow-xl border border-gray-200 p-8 md:p-12 transition-all duration-200">
					<!-- V1 Form -->
					<div data-show="$activeTab === 'v1'">
						@FormV1(csrfToken)
						@ErrorDisplayV1()
						@ResultDisplayV1()
					</div>
					<!-- V2 Form -->
					<div data-show="$activeTab === 'v2'">
						@FormV2(csrfToken)
						@ErrorDisplayV2()
						@ResultDisplayV2()
					</div>
					<!-- V3 Form -->
					<div data-show="$activeTab === 'v3'">
						@FormV3(csrfToken)
						@ErrorDisplayV3()
						@ResultDisplayV3()
					</div>
					<!-- Safe Flow Form -->
					<div data-show="$activeTab === 'safe'">
						@FormSafe(csrfToken)
						@ErrorDisplaySafe()
						@ResultDisplaySafe()
					</div>
					<!-- Smart Flow Form -->
					<div data-show="$activeTab === 'smart'">
						@FormSmart(csrfToken)
						@ErrorDisplaySmart()
						@ResultDisplaySmart()
					</div>
				</div>
			</div>
			<!-- Footer -->
			<footer class="mt-20 border-t border-gray-200 bg-white">
				<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
					<div class="grid grid-cols-1 md:grid-cols-3 gap-8">
						<!-- About -->
						<div>
							<h3 class="text-sm font-semibold text-gray-900 tracking-wider uppercase mb-4">About This Demo</h3>
							<p class="text-base text-gray-600 leading-relaxed">
								A comprehensive showcase of Google Genkit's flow orchestration capabilities in Go, demonstrating progressive enhancement from simple to advanced AI implementations.
							</p>
						</div>
						<!-- Technologies -->
						<div>
							<h3 class="text-sm font-semibold text-gray-900 tracking-wider uppercase mb-4">Technologies</h3>
							<ul class="space-y-2">
								<li><a href="https://firebase.google.com/docs/genkit" target="_blank" rel="noreferrer noopener" class="text-gray-600 hover:text-indigo-600 transition-colors">Firebase Genkit</a></li>
								<li><a href="https://gin-gonic.com/" target="_blank" rel="noreferrer noopener" class="text-gray-600 hover:text-indigo-600 transition-colors">Gin Web Framework</a></li>
								<li><a href="https://templ.guide/" target="_blank" rel="noreferrer noopener" class="text-gray-600 hover:text-indigo-600 transition-colors">TEMPL Templates</a></li>
								<li><a href="https://data-star.dev/" target="_blank" rel="noreferrer noopener" class="text-gray-600 hover:text-indigo-600 transition-colors">Datastar Hypermedia</a></li>
								<li><a href="https://tailwindcss.com/" target="_blank" rel="noreferrer noopener" class="text-gray-600 hover:text-indigo-600 transition-colors">Tailwind CSS</a></li>
							</ul>
						</div>
						<!-- Resources -->
						<div>
							<h3 class="text-sm font-semibold text-gray-900 tracking-wider uppercase mb-4">Resources</h3>
							<ul class="space-y-2">
								<li><a href="https://github.com/vnaveen-mh/welcome-note-generator" target="_blank" rel="noreferrer noopener" class="text-gray-600 hover:text-indigo-600 transition-colors">View Source Code</a></li>
								<li><a href="https://github.com/vnaveen-mh/welcome-note-generator" target="_blank" rel="noreferrer noopener" class="text-gray-600 hover:text-indigo-600 transition-colors">Read Documentation</a></li>
								<li><a href="https://ai.google.dev/" target="_blank" rel="noreferrer noopener" class="text-gray-600 hover:text-indigo-600 transition-colors">Google Gemini API</a></li>
							</ul>
						</div>
					</div>
					<div class="mt-8 pt-8 border-t border-gray-200">
						<p class="text-center text-gray-500 text-sm">
							Built with <span class="text-red-500">‚ô•</span> using Go, Genkit, and modern web technologies
							<span class="mx-2">‚Ä¢</span>
							<a href="https://github.com/vnaveen-mh/welcome-note-generator" target="_blank" rel="noreferrer noopener" class="text-indigo-600 hover:text-indigo-700 font-medium">View on GitHub</a>
						</p>
					</div>
				</div>
			</footer>
		</div>
	}
}

templ TabButton(id, label, description string) {
	<button
		type="button"
		class="group relative px-6 py-4 rounded-2xl border transition-all duration-200 hover:shadow-md bg-white text-[var(--muted)]"
		data-class:border-teal-600={ fmt.Sprintf("$activeTab === '%s'", id) }
		data-class:bg-teal-50={ fmt.Sprintf("$activeTab === '%s'", id) }
		data-class:shadow-sm={ fmt.Sprintf("$activeTab === '%s'", id) }
		data-class:border-gray-200={ fmt.Sprintf("$activeTab !== '%s'", id) }
		data-on:click={ fmt.Sprintf("$activeTab = '%s'; $result = ''; $error = ''", id) }
	>
		<div class="text-left">
			<div class="font-semibold text-sm transition-colors" data-class:text-teal-700={ fmt.Sprintf("$activeTab === '%s'", id) } data-class:text-slate-900={ fmt.Sprintf("$activeTab !== '%s'", id) }>
				{ label }
			</div>
			<div class="text-xs mt-1 transition-colors" data-class:text-teal-600={ fmt.Sprintf("$activeTab === '%s'", id) } data-class:text-slate-600={ fmt.Sprintf("$activeTab !== '%s'", id) }>
				{ description }
			</div>
		</div>
		<div class="absolute bottom-0 left-0 right-0 h-1 bg-teal-500 rounded-b-lg transition-opacity duration-200" data-class:opacity-100={ fmt.Sprintf("$activeTab === '%s'", id) } data-class:opacity-0={ fmt.Sprintf("$activeTab !== '%s'", id) }></div>
	</button>
}

templ FormV1(csrfToken string) {
	<div>
		<h2 class="text-2xl font-semibold mb-2 text-[var(--bg-contrast)]">
			Version 1: Simple Flow
		</h2>
		<p class="text-[var(--muted)] mb-2">
			Enter any occasion or context, and we'll generate a welcome note.
			This version is intentionally simple and sends your text directly to the AI.
		</p>
		<p class="text-xs text-[var(--muted)] mb-6">
			Demo only. Text you enter is sent directly to the AI model and may produce
			unexpected or nonsensical output, especially for unusual or nonsensical inputs.
		</p>
		<form
			data-on:submit={ buildFormAction("/api/v1/generate", csrfToken) }
			data-indicator="loading"
		>
			<div class="mb-6">
				<label for="occasion-v1" class="block text-sm font-semibold text-[var(--bg-contrast)] mb-2">
					Occasion or context
				</label>
				<input
					type="text"
					id="occasion-v1"
					name="occasion"
					data-bind="occasionV1"
					placeholder="e.g., birthday party, hotel check-in, new employee, first production deploy"
					class="w-full px-4 py-3 border border-[var(--border)] rounded-xl focus:ring-2 focus:ring-[var(--accent)] focus:border-transparent bg-white"
					required
				/>
			</div>
			<button
				type="submit"
				class="w-full bg-[var(--accent)] text-white py-3 px-6 rounded-xl font-semibold hover:bg-[var(--accent-strong)] transition-colors shadow-sm disabled:opacity-50 disabled:cursor-not-allowed"
				data-attr:disabled="$loading || $occasionV1 === ''"
			>
				<i class="fas fa-circle-notch fa-spin mr-2" data-show="$loading"></i>
				<span>Generate Welcome Note</span>
			</button>
		</form>
	</div>
}

templ FormV2(csrfToken string) {
	<div>
		<h2 class="text-2xl font-semibold mb-2 text-[var(--bg-contrast)]">
			Version 2: Structured Input
		</h2>
		<p class="text-[var(--muted)] mb-2">
			Provide a specific occasion and customize the welcome note with language,
			length, and tone. This version uses structured inputs to give you more control.
		</p>
		<p class="text-xs text-[var(--muted)] mb-6">
			Demo only. Your text and selections are sent directly to the AI model.
			Unusual or unclear inputs may still produce creative or unexpected results.
		</p>
		<form
			data-on:submit={ buildFormAction("/api/v2/generate", csrfToken) }
			data-indicator="loading"
		>
			<div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
				<!-- Occasion -->
				<div class="md:col-span-2">
					<label for="occasion-v2" class="block text-sm font-semibold text-[var(--bg-contrast)] mb-2">
						Occasion *
					</label>
					<input
						type="text"
						id="occasion-v2"
						name="occasion"
						data-bind="occasionV2"
						placeholder="e.g., startup closing first deal"
						class="w-full px-4 py-3 border border-[var(--border)] rounded-xl focus:ring-2 focus:ring-[var(--accent)] focus:border-transparent bg-white"
						required
					/>
				</div>
				<!-- Language -->
				<div>
					<label for="language-v2" class="block text-sm font-semibold text-[var(--bg-contrast)] mb-2">
						Language
					</label>
					<select
						id="language-v2"
						name="language"
						data-bind="languageV2"
						class="w-full px-4 py-3 border border-[var(--border)] rounded-xl focus:ring-2 focus:ring-[var(--accent)] focus:border-transparent bg-white"
					>
						<option value="English">English</option>
						<option value="Telugu">Telugu</option>
						<option value="Hindi">Hindi</option>
						<option value="Spanish">Spanish</option>
						<option value="French">French</option>
						<option value="German">German</option>
						<option value="Japanese">Japanese</option>
					</select>
				</div>
				<!-- Length -->
				<div>
					<label for="length-v2" class="block text-sm font-semibold text-[var(--bg-contrast)] mb-2">
						Length
					</label>
					<select
						id="length-v2"
						name="length"
						data-bind="lengthV2"
						class="w-full px-4 py-3 border border-[var(--border)] rounded-xl focus:ring-2 focus:ring-[var(--accent)] focus:border-transparent bg-white"
					>
						<option value="short" selected>Short (2-5 sentences)</option>
						<option value="medium">Medium (5‚Äì10 sentences)</option>
						<option value="long">Long (10+ sentences)</option>
					</select>
				</div>
				<!-- Tone -->
				<div class="md:col-span-2">
					<label for="tone-v2" class="block text-sm font-semibold text-[var(--bg-contrast)] mb-2">
						Tone
					</label>
					<select
						id="tone-v2"
						name="tone"
						data-bind="toneV2"
						class="w-full px-4 py-3 border border-[var(--border)] rounded-xl focus:ring-2 focus:ring-[var(--accent)] focus:border-transparent bg-white"
					>
						<option value="warm">Warm</option>
						<option value="formal">Formal</option>
						<option value="casual">Casual</option>
						<option value="humorous">Humorous</option>
						<option value="professional">Professional</option>
						<option value="poetic">Poetic</option>
					</select>
				</div>
			</div>
			<button
				type="submit"
				class="w-full bg-[var(--accent)] text-white py-3 px-6 rounded-xl font-semibold hover:bg-[var(--accent-strong)] transition-colors shadow-sm disabled:opacity-50 disabled:cursor-not-allowed"
				data-attr:disabled="$loading || $occasionV2 === ''"
			>
				<i class="fas fa-circle-notch fa-spin mr-2" data-show="$loading"></i>
				<span>Generate Customized Note</span>
			</button>
		</form>
	</div>
}

templ FormV3(csrfToken string) {
	<div>
		<h2 class="text-2xl font-semibold mb-2 text-[var(--bg-contrast)]">
			Version 3: Structured Output
		</h2>
		<p class="text-[var(--muted)] mb-2">
			Same as V2, but the flow returns a structured JSON response: the welcome note
			plus metadata about how it was generated (interpreted occasion, tone, sentiment, safety, etc.).
		</p>
		<p class="text-xs text-[var(--muted)] mb-6">
			Demo only. Your text and selections are sent directly to the AI model. The response is parsed
			into typed JSON on the backend so you can inspect both the note and its metadata.
		</p>
		<form
			data-on:submit={ buildFormAction("/api/v3/generate", csrfToken) }
			data-indicator="loading"
		>
			<div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
				<div class="md:col-span-2">
					<label for="occasion-v3" class="block text-sm font-semibold text-[var(--bg-contrast)] mb-2">
						Occasion *
					</label>
					<input
						type="text"
						id="occasion-v3"
						name="occasion"
						data-bind="occasionV3"
						placeholder="e.g., Diwali celebration"
						class="w-full px-4 py-3 border border-[var(--border)] rounded-xl focus:ring-2 focus:ring-[var(--accent)] focus:border-transparent bg-white"
						required
					/>
				</div>
				<div>
					<label for="language-v3" class="block text-sm font-semibold text-[var(--bg-contrast)] mb-2">
						Language
					</label>
					<select
						id="language-v3"
						name="language"
						data-bind="languageV3"
						class="w-full px-4 py-3 border border-[var(--border)] rounded-xl focus:ring-2 focus:ring-[var(--accent)] focus:border-transparent bg-white"
					>
						<option value="English">English</option>
						<option value="Telugu">Telugu</option>
						<option value="Hindi">Hindi</option>
						<option value="Spanish">Spanish</option>
						<option value="French">French</option>
						<option value="German">German</option>
					</select>
				</div>
				<div>
					<label for="length-v3" class="block text-sm font-semibold text-[var(--bg-contrast)] mb-2">
						Length
					</label>
					<select
						id="length-v3"
						name="length"
						data-bind="lengthV3"
						class="w-full px-4 py-3 border border-[var(--border)] rounded-xl focus:ring-2 focus:ring-[var(--accent)] focus:border-transparent bg-white"
					>
						<option value="short">Short</option>
						<option value="medium" selected>Medium</option>
						<option value="long">Long</option>
					</select>
				</div>
				<div class="md:col-span-2">
					<label for="tone-v3" class="block text-sm font-semibold text-[var(--bg-contrast)] mb-2">
						Tone
					</label>
					<select
						id="tone-v3"
						name="tone"
						data-bind="toneV3"
						class="w-full px-4 py-3 border border-[var(--border)] rounded-xl focus:ring-2 focus:ring-[var(--accent)] focus:border-transparent bg-white"
					>
						<option value="warm">Warm</option>
						<option value="formal">Formal</option>
						<option value="casual">Casual</option>
						<option value="humorous">Humorous</option>
						<option value="professional">Professional</option>
					</select>
				</div>
			</div>
			<button
				type="submit"
				class="w-full bg-[var(--accent)] text-white py-3 px-6 rounded-xl font-semibold hover:bg-[var(--accent-strong)] transition-colors shadow-sm disabled:opacity-50 disabled:cursor-not-allowed"
				data-attr:disabled="$loading  || $occasionV3 === ''"
			>
				<i class="fas fa-circle-notch fa-spin mr-2" data-show="$loading"></i>
				<span>Generate with Metadata</span>
			</button>
		</form>
	</div>
}

templ FormSafe(csrfToken string) {
	<div>
		<h2 class="text-2xl font-semibold mb-2 text-[var(--bg-contrast)]">Safe Flow: With Content Moderation</h2>
		<p class="text-[var(--muted)] mb-6">Includes automatic content safety checking and sanitization. Try requesting toxic or inappropriate content to see moderation in action.</p>
		<form
			data-on:submit={ buildFormAction("/api/safe/generate", csrfToken) }
			data-indicator="loading"
		>
			<div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
				<div class="md:col-span-2">
					<label for="occasion-safe" class="block text-sm font-semibold text-[var(--bg-contrast)] mb-2">Occasion *</label>
					<input
						type="text"
						id="occasion-safe"
						name="occasion"
						data-bind="occasionSafe"
						placeholder="e.g., meetup introduction"
						class="w-full px-4 py-3 border border-[var(--border)] rounded-xl focus:ring-2 focus:ring-[var(--accent)] focus:border-transparent bg-white"
						required
					/>
				</div>
				<div>
					<label for="language-safe" class="block text-sm font-semibold text-[var(--bg-contrast)] mb-2">Language</label>
					<select
						id="language-safe"
						name="language"
						data-bind="languageSafe"
						class="w-full px-4 py-3 border border-[var(--border)] rounded-xl focus:ring-2 focus:ring-[var(--accent)] focus:border-transparent bg-white"
					>
						<option value="English">English</option>
						<option value="English">Telugu</option>
						<option value="English">Hindi</option>
						<option value="Spanish">Spanish</option>
						<option value="French">French</option>
					</select>
				</div>
				<div>
					<label for="length-safe" class="block text-sm font-semibold text-[var(--bg-contrast)] mb-2">Length</label>
					<select
						id="length-safe"
						name="length"
						data-bind="lengthSafe"
						class="w-full px-4 py-3 border border-[var(--border)] rounded-xl focus:ring-2 focus:ring-[var(--accent)] focus:border-transparent bg-white"
					>
						<option value="short" selected>Short</option>
						<option value="medium">Medium</option>
						<option value="long">Long</option>
					</select>
				</div>
				<div class="md:col-span-2">
					<label for="tone-safe" class="block text-sm font-semibold text-[var(--bg-contrast)] mb-2">Tone (Try "insulting" or "sarcastic" to test moderation)</label>
					<select
						id="tone-safe"
						name="tone"
						data-bind="toneSafe"
						class="w-full px-4 py-3 border border-[var(--border)] rounded-xl focus:ring-2 focus:ring-[var(--accent)] focus:border-transparent bg-white"
					>
						<option value="warm">Warm</option>
						<option value="formal">Formal</option>
						<option value="casual">Casual</option>
						<option value="humorous">Humorous</option>
						<option value="insulting">Insulting</option>
						<option value="sarcastic">Sarcastic</option>
					</select>
				</div>
			</div>
			<button
				type="submit"
				class="w-full bg-[var(--accent)] text-white py-3 px-6 rounded-xl font-semibold hover:bg-[var(--accent-strong)] transition-colors shadow-sm disabled:opacity-50 disabled:cursor-not-allowed"
				data-attr:disabled="$loading  || $occasionSafe === ''"
			>
				<i class="fas fa-circle-notch fa-spin mr-2" data-show="$loading"></i>
				<span>Generate Safe Note</span>
			</button>
		</form>
	</div>
}

templ FormSmart(csrfToken string) {
	<div>
		<h2 class="text-2xl font-semibold mb-2 text-[var(--bg-contrast)]">Smart Flow: Natural Language Input</h2>
		<p class="text-[var(--muted)] mb-6">Just describe what you want in plain English. The AI will interpret your request, generate the note, and moderate it.</p>
		<form
			data-on:submit={ buildFormAction("/api/smart/generate", csrfToken) }
			data-indicator="loading"
		>
			<div class="mb-6">
				<label for="description-smart" class="block text-sm font-semibold text-[var(--bg-contrast)] mb-2">Describe what you need</label>
				<textarea
					id="description-smart"
					name="description"
					data-bind="descriptionSmart"
					rows="4"
					placeholder="Example: 'Write a warm and professional welcome message for our new software engineer joining next Monday. Keep it friendly but not too casual.'"
					class="w-full px-4 py-3 border border-[var(--border)] rounded-xl focus:ring-2 focus:ring-[var(--accent)] focus:border-transparent bg-white"
					required
				></textarea>
				<p class="mt-2 text-sm text-[var(--muted)]">The AI will automatically extract the occasion, tone, length, and language from your description.</p>
			</div>
			<button
				type="submit"
				class="w-full bg-[var(--accent)] text-white py-3 px-6 rounded-xl font-semibold hover:bg-[var(--accent-strong)] transition-colors shadow-sm disabled:opacity-50 disabled:cursor-not-allowed"
				data-attr:disabled="$loading  || $descriptionSmart === ''"
			>
				<i class="fas fa-circle-notch fa-spin mr-2" data-show="$loading"></i>
				<span>Generate Smart Note</span>
			</button>
		</form>
	</div>
}
